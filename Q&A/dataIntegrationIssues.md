# Kettle 常见问题排除

请按照这些主题中的建议来帮助解决与Pentaho数据集成相关的常见问题：

- 转换步骤和作业条目疑难解答
- 排除数据库连接
- Pentaho Server上安排的作业无法在远程Carte服务器上执行转换
- 无法在另一个作业的Carte实例的存储库中运行作业
- 对Pentaho数据服务问题进行故障排除
- Kitchen和Pan无法从ZIP导出中读取文件
- 使用ODBC
- 编写多个文件时提高性能

## 转换步骤和作业条目疑难解答

如果您在转换步骤或作业条目方面遇到问题，请检查这些条件是否适用于您的情况。

### 打开转换或作业时出现“缺少插件”错误

如果您尝试打开包含未在PDI客户端副本中安装的步骤或条目的转换或作业，则会显示以下错误消息：

![](/image/ssPDIMissingPlugins.png)

要解决此问题，请在PDI客户端中添加步骤或条目，或在市场中找到它并进行安装。有关详细信息，请参阅使用Marketplace安装插件一文。

### 无法执行或修改转换或作业

如果您无法执行任何标准转换或作业任务（例如运行，预览，调试，重放，验证，计划，复制，导出或保存），则您没有执行权限。

让管理用户检查您的角色是否已被授予执行权限。

### 步骤已经在画布错误

如果在PDI客户端的画布上隐藏了一个步骤，则在尝试使用其转换时，您可能会收到“Step is Already on Canvas”错误消息。

无论步骤是隐藏还是显示在画布中，它都会在数据集成透视图的“ 视图”选项卡中的  转换下的“ 步骤”文件夹中列出。要重新显示画布上的隐藏步骤，请将其从“ 视图”选项卡中的“ 步骤”文件夹拖到画布上。

## 排除数据库连接问题

如果您在PDI中遇到数据库连接问题，请检查以下条件是否适用于您的情况：

### 不支持的数据库

可以通过ODBC或JDBC连接使用通用数据库驱动程序从不受支持的数据库中读取数据。如果要访问尚未包含在[受支持组件]()列表中的数据库类型，请与Pentaho联系  。

您可以在位于`````... \ design-tools \ data-integration```下的lib 目录中  添加或替换数据库驱动程序文件  。

### 从单个表读取和更新时的数据库锁定

如果您在转换中创建，读取和更新单个表的步骤，您可能会遇到数据库锁定或处理速度变慢。在单个转换中读取和更新表上的行可能导致数据库停止更新。

例如，如果您有一个从表中的行读取的步骤（表输入  步骤），并且您需要使用更新  步骤更新转换，则可能会导致锁定问题，尤其是对于MS SQL数据库。应避免在同一个表中读取和更新同一转换中的行。

与所有数据库兼容的通用解决方案是复制要读取/更新的表，然后创建单独的读取/更新步骤。安排在转换中按顺序执行的步骤，每个步骤在同一个表的不同但相同的版本上。调整数据库行锁定参数或机制也将解决此问题。

### 强制PDI在参数化SQL查询中使用DATE而不是TIMESTAMP

如果查询优化器错误地使用谓词TIMESTAMP，那是因为JDBC驱动程序/数据库将数据类型从TIMESTAMP转换为DATE。在某些情况下，此转换会阻止数据库的查
询优化器使用正确的索引。例如，Oracle可能声明它无法使用索引，并生成以下错误消息：

```$xslt
The predicate DATE used at line ID 1 of the execution plan contains an implicit
   data type conversion on indexed column DATE. This implicit data type conversion prevents
   the optimizer from selecting indices on table A.
  
```

要解决此问题，使用Select Values步骤，并设置Precision到1和Value到DATE。这些更改会强制将参数设置为DATE而不是TIMESTAMP。

### PDI无法识别对表所做的更改


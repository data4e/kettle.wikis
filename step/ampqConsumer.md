# AMQP消费者(AMQP Consumer)

高级消息队列协议（AMQP）消费者步骤通过AMQP 0-9-1兼容代理从AMQP消息生成器接收流数据。您可以配置此步骤以使用现有AMQP消息队列或创建新队列。 

您还可以设置AMQP使用者步骤，以连续从AMQP消息或代理中提取流数据，以收集有关受监视事件的消息，跟踪用户对数据流的消耗或监视警报。
父AMQP Consumer步骤运行子（子转换），该子转换根据消息批量大小或持续时间执行，使您可以近乎实时地处理连续的记录流。子转换必须以“ 从流中获取记录”步骤开始。此外，您可以选择子转换中的一个步骤，将记录流回父转换，父转换将下游的记录传递给同一父转换中包含的任何其他步骤。 

> 由于AMQP Consumer步骤持续提取流数据，您可能希望在父转换或子转换中使用Abort 步骤来停止从AMQP获取特定工作流的记录。例如，您可以按定时计划运行父转换，
或者如果传感器数据超出预设范围，则中止子转换。

### 前言(Before You Begin)

在使用AMQP Consumer步骤之前，请注意以下条件：

- 此步骤使用并要求AMQP 0-9-1消息传递协议。
- 在配置此步骤之前，您必须具有AMQP 0-9-1兼容代理（例如  [RabbitMQ](https://www.rabbitmq.com/)）。
- 在转换中，您可以单独使用AMQP Consumer步骤从任何AMQP生产者或代理中获取消息。该AMQP生产者没有必要步骤。
如果要同时使用这两个步骤（无论是在相同的转换中还是在单独的转换中），则在“消费者”步骤中指定的某些设置必须与“生产者”步骤中定义的某些设置相匹配。
下面的标签部分说明了哪些设置必须匹配。
- 虽然您可以设置此步骤以使用现有AMQP消息队列，但您也可以使用此步骤创建新的AMQP消息队列。有关更多信息，请参阅创建新的AMQP消息队列。

### General

![](/image/PDI_TransStep_Dialog_AMQP-Consumer.png)

为“ 步骤名称”和“ 转换”字段输入以下信息：